http://support.microsoft.com/kb/135788

 升级您的 Internet 体验
中国大陆	更改	|	微软站点地图
微软帮助和支持   

帮助和支持首页 选择产品支持中心 高级搜索 下载与更新 社区或论坛 产品购买 联系微软

文章编号: 135788 - 最后修改: 2005年7月11日 - 修订: 1.2
PRB： 通知图标的菜单不工作正常

点击这里查看逐句中英文对照机器翻译
查看机器翻译免责声明
查看本文应用于的产品
展开全部 | 关闭全部
症状当您显示通知图标的上下文菜单 （参见 Shell_NotifyIcon） 除菜单中或创建菜单 （如果可见） ...

解决方案
若要更正第一个动作，您需要之前调用 TrackPopupMenu 或 TrackPopupMenuEx 使当前窗口成为前台窗口。 

第二个问题是由与 TrackPopupMenu 问题引起的。它是强制任务切换到在不久的将来的某个时间调用 TrackPopupMenu 的应用程序所必需的。这可以通过发布到窗口或线程的良性消息来完成。 

下面的代码将负责的所有这一切：
   SetForegroundWindow(hDlg);

   // Display the menu
   TrackPopupMenu(   hSubMenu,
                     TPM_RIGHTBUTTON,
                     pt.x,
                     pt.y,
                     0,
                     hDlg,
                     NULL);

   PostMessage(hDlg, WM_NULL, 0, 0);
				
回到顶端
状态
此行为是设计使然。
回到顶端
这篇文章中的信息适用于:
Microsoft Platform Software Development Kit-January 2000 Edition
回到顶端
关键字： 
kbmt kbmenu kbprb kbshell KB135788 KbMtzh
回到顶端
机器翻译
注意：这篇文章是由无人工介入的微软自动的机器翻译软件翻译完成。微软很高兴能同时提供给您由人工翻译的和由机器翻译的文章, 以使您能使用您的语言访问所有的知识库文章。然而由机器翻译的文章并不总是完美的。它可能存在词汇，语法或文法的问题，就像是一个外国人在说中文时总是可能犯这样的错误。虽然我们经常升级机器翻译软件以提高翻译质量，但是我们不保证机器翻译的正确度，也不对由于内容的误译或者客户对它的错误使用所引起的任何直接的, 或间接的可能的问题负责。
点击这里察看该文章的英文版： 135788 
回到顶端
Microsoft和/或其各供应商对于为任何目的而在本服务器上发布的文件及有关图形所含信息的适用性，不作任何声明。 所有该等文件及有关图形均"依样"提供，而不带任何性质的保证。Microsoft和/或其各供应商特此声明，对所有与该等信息有关的保证和条件不负任何责任，该等保证和条件包括关于适销性、符合特定用途、所有权和非侵权的所有默示保证和条件。在任何情况下，在由于使用或运行本服务器上的信息所引起的或与该等使用或运行有关的诉讼中，Microsoft和/或其各供应商就因丧失使用、数据或利润所导致的任何特别的、间接的、衍生性的损害或任何因使用而丧失所导致的之损害、数据或利润不负任何责任。
 
请提供关于这些信息的反馈

